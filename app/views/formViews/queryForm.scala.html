@(formData: (List[frontend.forms.FilterFormData], List[frontend.forms.SortFormData],
        List[frontend.forms.AggregateFormData], List[frontend.forms.GraphFormParser],
        List[String]))

@import frontend.forms.DataManipulationForm

<!-- No head/body/html tags here
    because this should not be a webpage
    on it's owm. It should always be
    embedded in something else. -->

<script src="@routes.Assets.at("javascripts/query-form.js")" type="text/javascript"></script>

<div>
    @helper.form(action = routes.Application.submitForm) {
        <div id="filterDiv">
            @if(formData._1.length == 0) {
                <!-- there was no passed data so we make a single,
                empty form -->
                @formViews.filterForm(displayConnector = false, None)
            } else {
                <!-- There was passed data, so we take the head and convert
                 it into a form without a logical connector -->
                @formViews.filterForm(false, Some(formData._1.head))
                <!-- Then we go through the remainder of the items passed
                and fill them out correctly -->
                @for(data <- formData._1.tail) {
                    @formViews.filterForm(true, Some(data))
                }
            }
        </div>
        <button id="addOr" type="button" name="addOr" value="Add Or Filter">Add Filter</button>
        <br/>
        <br/>

        <div id="aggregateDiv">
            @if(formData._3.length == 0) {
            <!-- there was no passed data so we make a single,
                empty form -->
                @formViews.aggregateForm(None)
            } else {
                @for(data <- formData._3) {
                    @formViews.aggregateForm(Some(data))
                }
            }
        </div>

        <button id="addAggregate" type="button" name="addAggregate" value="Add Aggregation">Add Aggregation</button>
        <br/>
        <br/>
        <div id="sortDiv">
            @if(formData._2.length == 0) {
                    <!-- there was no passed data so we make a single,
                    empty form -->
                @formViews.sortForm(None)
            } else {
                @for(data <- formData._2) {
                    @formViews.sortForm(Some(data))
                }
            }
        </div>

        <button id="addSort" type="button" name="addSort" value="Add Sort">Add Sort</button>
        <br/>
        <br/>
        <button type="submit" name="submitForm" value="Parse Data">Search Data</button>

        <br/>
        <br/>
        <div id="graphDiv">
            @if(formData._4.length == 0) {
                    <!-- there was no passed data so we make a single,
                    empty form -->
                @formViews.graphForm(true, None)
            } else {
                @formViews.graphForm(true, Some(formData._4.head))
                @for(data <- formData._4.tail) {
                    @formViews.graphForm(false, Some(data))
                }
            }
        </div>
        <button type="button" id="addGraph" name="addGraph" value="Add Graph">Add Dataset to Graph</button>
        <div id="columnDiv">
            @if(formData._5.length == 0) {
                @formViews.fieldSelect(Some(Static.noSelection))
            } else {
                @for(field <- formData._5) {
                    @formViews.fieldSelect(Some(field))
                }
            }
        </div>
        <button type="button" id="addColumn" name="addColumn" value="Add Column">Add Column</button>
        <br/>
        <br/>
        <button type="submit" name="submitGraph" value="Draw Graph">Draw Graph</button>

    }
</div>