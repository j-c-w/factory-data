@(sessionId: String,
        headers: List[String], formData: (List[frontend.forms.FilterFormData], List[frontend.forms.SortFormData],
        List[frontend.forms.AggregateFormData], List[frontend.forms.GraphFormParser], List[String]), graphFile: java.io.File)

@import backend.scala.datatypes.LineListObject
@import backend.scala.graphing.{Graph, BarChartData}
@import backend.scala.Backend
@import scala.concurrent._
@import play.api.cache.Cache
@import play.api.Play.current
@import scala.util.{Success, Failure}
@import frontend.forms.{DataManipulationForm, FilterFormData, SortFormData, AggregateFormData}


<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Data</title>
    <link href="@routes.Assets.at("stylesheets/main.css")" rel="stylesheet" type="text/css">
    <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>

</head>
<body>
    @generic.header()
    <div id="content">
        <div id="queryForm">
            @formViews.queryForm(formData)
        </div>
        @if(graphFile.toString != "") {
            <br/>
            <br/>
            <script src="@routes.Assets.at("javascripts/graph-loader.js")" type="text/javascript"></script>
            <p class="center"><img src="@routes.Assets.at("images/loading.gif")" id="loadingGraphDisplay"></p>
            <p class="center"><img id="graphDisplay"></p>
            <!-- this <p> is soley for communicating with the JS. -->
            <p id="pictureFileName">@graphFile.getName()</p>
        }

        <div class="horizontalScroll">
            <table class="borderedTable">
                @for(header <- formData._5) {
                    <th>@Html(header)</th>
                }
            </table>
            <div id="dataDiv">
                <p id="sessionId">@sessionId</p>
                <script src="@routes.Assets.at("javascripts/data-loader.js")" type="text/javascript"></script>
                <p class="center"><img src="@routes.Assets.at("images/loading.gif")" id="dataLoading"></p>
            </div>
        </div>

    </div>
    @generic.footer()
</body>
</html>